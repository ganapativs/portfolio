---
title: Babel plugins - 'loose' mode caveats
date: '2019-12-03'
spoiler: Using 'loose' mode with babel plugins might be risky?
draft: true
cover: './cover.jpg'
---

Many babel plugins have two modes:

- **Normal mode**: closely follows the ECMAScript 6 standard
- **Loose mode**: produces simple ES5 code, more like the handwritten one

`loose` mode might generate potentially faster and old browser engine compatible ES5 code. but,
it might also introduce unintended results when switching from transpiled ES6 to native ES6 at
later stage as `loose` mode generates simplified spec compliant code.

As discussed in [this GitHub issue](https://github.com/babel/babel/issues/7958#issuecomment-389916364)

> In loose mode, all [iterables](https://javascript.info/iterable) are assumed to be arrays.

So, when using `loose` mode, some of the basic operations like converting a `string`
to a array using `spread` operators might not work as expected.

```js
// Input code
const charArr = [..."hello"];

/**
 * Transpiled code in loose mode(Produces wrong result)
 *   expected: ["h", "e", "l", "l", "o"]
 *   generated: ["hello"]
*/
var charArr = [].concat("hello");
```

Babel generated bxxxxxxxxx

some of the modern JavaScript features like `Set` and `Map` are not properly
handled in `loose` mode as they are not arrays.



---

https://www.youtube.com/watch?v=2Xc9gXyf2G4

https://codesandbox.io/s/j0y0vpz5

https://twitter.com/MichaelDeBoey93/status/1152991421789548546

<iframe src="https://www.example.com/" width="600" height="400"></iframe>

# Hello

Namaste [India](https://example.com)

![Sample image](./cover.jpg)

> Oops! Important!

```js{1,3-4}
function getName(user) {
  let name = user.name;
  if (name === null) {
  	name = perform 'ask_name';
  }
  return name;
}
```
